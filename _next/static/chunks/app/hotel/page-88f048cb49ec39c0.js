(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[334],{229:function(e,t,l){Promise.resolve().then(l.bind(l,337))},337:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var a=l(9268),o=l(4522),s=l(6006),n=l(6008),r=l(1856),i=l(9944),c=l(7480),d=l(5482),p=l(4821),u=l(5846),f=l.n(u),m=l(1),h=l(6493);function x(e){let{data:t}=e,{currency:l}=(0,i.Z)(e=>e),{lang:o}=(0,r.Z)(e=>e),d=(0,s.useRef)(null),u=(0,n.useSearchParams)(),{dictionary:x}=(0,c.Z)(e=>e),[y,I]=(0,s.useState)(null);(0,n.useRouter)();let{cartData:g,setCartData:R}=(0,m.Z)(),[v,H]=(0,s.useState)({room:0,adult:0,children:0,checkIn:"",checkOut:"",rateKey:"",lang:""});(0,s.useEffect)(()=>{if(null!=t&&d.current)for(let e of d.current.children)e.classList.remove("scale-0"),e.classList.add("scale-100");if(null!=t&&d.current){let e=[];for(let t=0;t<d.current.children.length;t++)e[t]=!1}},[t]),(0,s.useEffect)(()=>{H({room:parseInt(u.get("room")),adult:parseInt(u.get("adult")),children:parseInt(u.get("children")),checkIn:u.get("checkIn"),checkOut:u.get("checkOut"),rateKey:"",lang:u.get("lang")})},[u]);let D=e=>{let t=btoa(JSON.stringify({...v,rateKey:e}));return t},N=e=>{console.log("cart",e),null!==g&&"null"!==(0,h.Jx)(g)?R(JSON.stringify([...JSON.parse((0,h.Jx)(g)),{hotelName:e.hotelName,roomType:e.roomType,ratePlanName:e.ratePlanName,rateKey:e.rateKey,price:e.price,checkIn:e.checkIn,checkOut:e.checkOut,selected:e.selected,noOfRoom:e.noOfRoom}])):R(JSON.stringify([{hotelName:e.hotelName,roomType:e.roomType,ratePlanName:e.ratePlanName,rateKey:e.rateKey,price:e.price,checkIn:e.checkIn,checkOut:e.checkOut,selected:e.selected,noOfRoom:e.noOfRoom}]))};return(0,a.jsx)(a.Fragment,{children:null!==t&&(0,a.jsx)("div",{ref:d,className:"flex flex-col gap-5 lg:p-0",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"relative w-full shadow shadow-luxgreen p-2 lg:p-5 transform transition-all duration-700 ease-out scale-0",children:[(0,a.jsx)("h2",{className:"text-lg font-bold uppercase text-luxgreen",children:"TW"===o?void 0!==e.roomType&&x.roomType.filter(t=>t.code===e.roomType)[0].tw:void 0!==e.roomType&&x.roomType.filter(t=>t.code===e.roomType)[0].en}),(0,a.jsx)("div",{className:"flex flex-col gap-5 mt-5",children:e.roomList.slice(0,4).map((e,t)=>(0,a.jsxs)("div",{className:"rounded p-2 bg-gray-100 flex flex-col lg:flex-row justify-between gap-5 shadow",children:[(0,a.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,a.jsxs)("p",{className:"capitalize flex flex-col lg:flex-row justify-start items-start lg:items-center lg:gap-2",children:[(0,a.jsx)("span",{className:"font-semibold capitalize",children:e.RoomDescription.Name.toLowerCase()})," ",e.RoomViewCode&&(0,a.jsx)("span",{className:"bg-teal-500 text-gray-100 rounded-lg text-xs px-2 py-[2px]",children:"TW"===o?x.roomView.filter(t=>t.code===e.RoomViewCode)[0].tw:x.roomView.filter(t=>t.code===e.RoomViewCode)[0].en})]}),e.BedTypeOptions&&e.BedTypeOptions.BedTypes&&e.BedTypeOptions.BedTypes[0].BedType&&(0,a.jsxs)("p",{className:"flex gap-2 items-center text-sm",children:[(0,a.jsx)(p.IE9,{size:16}),(0,a.jsxs)("span",{children:[e.BedTypeOptions.BedTypes[0].BedType[0].Count," ","","TW"===o?x.bedType.filter(t=>t.code===e.BedTypeOptions.BedTypes[0].BedType[0].Code)[0].tw:x.bedType.filter(t=>t.code===e.BedTypeOptions.BedTypes[0].BedType[0].Code)[0].en]})]}),(0,a.jsxs)("p",{className:"text-sm flex gap-2",children:[e.RatePlans.RatePlan&&e.RatePlans.RatePlan[0].MealsIncluded&&e.RatePlans.RatePlan[0].MealsIncluded.MealPlanCode&&(0,a.jsx)("span",{className:"border border-gray-300 px-2 py-[3px]",children:"TW"===o?x.mealPlan.filter(t=>t.code==e.RatePlans.RatePlan[0].MealsIncluded.MealPlanCode)[0].tw:x.mealPlan.filter(t=>t.code==e.RatePlans.RatePlan[0].MealsIncluded.MealPlanCode)[0].en}),e.RatePlans.RatePlan&&e.RatePlans.RatePlan[0].RatePlanInclusions&&e.RatePlans.RatePlan[0].RatePlanInclusions.RatePlanInclusion&&(0,a.jsx)("span",{className:"border border-gray-300 px-2 py-[3px]",children:"TW"===o?x.rateType.filter(t=>t.code==e.RatePlans.RatePlan[0].RatePlanInclusions.RatePlanInclusion[0].Code)[0].tw:x.rateType.filter(t=>t.code==e.RatePlans.RatePlan[0].RatePlanInclusions.RatePlanInclusion[0].Code)[0].en})]}),e.RatePlans.RatePlan&&e.RatePlans.RatePlan[0].AvailableQuantity&&e.RatePlans.RatePlan[0].AvailableQuantity<2&&(0,a.jsx)("p",{className:"text-xs",children:(0,a.jsxs)("span",{className:"text-pink-700",children:["TW"===o?"本站上僅剩":"Only"," ",e.RatePlans.RatePlan[0].AvailableQuantity," ","TW"===o?"間房":"Room left"]})})]}),(0,a.jsxs)("div",{className:"bg-white p-2",children:[(0,a.jsx)("p",{className:"text-right text-sm",children:"TW"===o?"總價":"Total price"}),(0,a.jsxs)("p",{className:"text-right text-pink-700 w-full lg:w-[120px]",children:[(0,a.jsx)("span",{className:"text-xs",children:"TWD"===l?"NT$ ":"$ "}),(0,a.jsx)("span",{className:"text-2xl",children:e.AmountAfterTax.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})]}),(0,a.jsx)(f(),{href:{pathname:"/book",query:{id:D(e.RateKey)}},children:(0,a.jsx)("button",{className:"w-full bg-luxorange hover:bg-orange-500 text-gray-100 text-sm p-2",children:"TW"===o?"預訂":"Reserve"})}),(0,a.jsx)("button",{className:"w-full border border-luxorange hover:bg-luxorange hover:text-gray-100 text-gray-600 text-sm p-2 mt-2",onClick:()=>N({hotelName:e.HotelName,roomType:e.RoomType,ratePlanName:e.RoomDescription.Name,rateKey:e.RateKey,price:parseFloat(e.AmountAfterTax),checkIn:v.checkIn,checkOut:v.checkOut,selected:!1,noOfRoom:e.RatePlans.RatePlan[0].LimitedAvailability||e.RatePlans.RatePlan[0].AvailableQuantity>v.room?v.room:e.RatePlans.RatePlan[0].AvailableQuantity}),children:"TW"===o?"加入購物車":"Add to cart"})]})]},t))})]},t))})})}var y=l(7782),I=l(4941);function g(){let[e,t]=(0,s.useState)(!1),{dictionary:l}=(0,c.Z)(e=>e),{userData:p,setUserData:u}=(0,o.Z)(e=>e),[f,m]=(0,s.useState)(null),{currency:h}=(0,i.Z)(e=>e),{lang:g}=(0,r.Z)(e=>e);(0,n.useRouter)();let R=(0,n.useSearchParams)(),[v,H]=(0,s.useState)({searchCode:"",room:0,adult:0,children:0,childAges:"",checkIn:"",checkOut:"",currency:"",lang:""}),[D,N]=(0,s.useState)(null),[j,T]=(0,s.useState)({checkIn:"",checkOut:""}),{checkInTime:P,checkOutTime:b,setCheckTime:k}=(0,I.Z)(e=>e);(0,s.useEffect)(()=>{null!=p&&(async()=>{let e={headers:{"Content-Type":"application/json","x-siloah":"siloah"},method:"POST",body:JSON.stringify({token:p.token})},t=await fetch("".concat("https://node.taiwanviptravel.com","/hotel/verifyToken"),e),l=await t.json();"Error"===l.status&&(u(null),window.location.reload())})()},[]),(0,s.useEffect)(()=>{t(!0),H(e=>(O(e={...v,searchCode:R.get("searchCode"),room:parseInt(R.get("room")),adult:parseInt(R.get("adult")),children:parseInt(R.get("children")),childAges:R.get("childAges"),checkIn:R.get("checkIn"),checkOut:R.get("checkOut"),currency:h,lang:g}),e))},[R,g,h]);let w=e=>{let t="",l="",a="";return 4===e.length?(t=e.slice(0,2),l=e.slice(2,4)):5===e.length&&(t=e.slice(0,2),l=e.slice(3,5)),parseInt(t)>=12&&24>parseInt(t)?(a="PM",t=12===parseInt(t)?"12":(parseInt(t)-12).toString()):24===parseInt(t)?(a="AM",t="12"):a="AM","".concat(t,":").concat(l," ").concat(a)},O=e=>{(async()=>{let l={headers:{"Content-Type":"application/json","x-siloah":"siloah"},method:"POST",body:JSON.stringify(e)};try{let e=await fetch("".concat("https://node.taiwanviptravel.com","/hotel/hotelSearch/detail"),l),t=await e.json();console.log("List Hotel by global Code",t),m(t.data),t.data.GetHotelDetailsRS.HotelDetailsInfo.HotelRateInfo&&t.data.GetHotelDetailsRS.HotelDetailsInfo.HotelRateInfo.RateInfos&&t.data.GetHotelDetailsRS.HotelDetailsInfo.HotelRateInfo.RateInfos.ConvertedRateInfo&&N(e=>{let l=t.data.GetHotelDetailsRS.HotelDetailsInfo.HotelRateInfo.RateInfos.ConvertedRateInfo.map((e,l)=>({...e,...t.data.GetHotelDetailsRS.HotelDetailsInfo.HotelRateInfo.Rooms.Room[l],...t.data.GetHotelDetailsRS.HotelDetailsInfo.HotelInfo}));l.reverse();let a=l.map(e=>e.RoomTypeCode);return a=(a=[...new Set(a)]).map(e=>({roomType:e,roomList:l.filter(t=>t.RoomTypeCode===e)})),console.log(a),a}),t.data.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.PropertyInfo.Policies.Policy.length>0&&t.data.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.PropertyInfo.Policies.Policy.forEach(e=>{T(t=>("CheckOut"===e.Text.Type?t={...t,checkOut:e.Text.value}:"CheckIn"===e.Text.Type&&(t={...t,checkIn:e.Text.value}),k(w(t.checkIn),w(t.checkOut)),t))})}catch(e){console.log(e)}t(!1)})()};return(0,a.jsxs)("div",{className:"container mx-auto max-w-[1024px] p-2 lg:p-5",children:[null!==f&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"border border-luxgreen p-2",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:null!==f&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelInfo.HotelName?f.GetHotelDetailsRS.HotelDetailsInfo.HotelInfo.HotelName:""}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{children:null!==f&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.LocationInfo.Address.AddressLine1?f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.LocationInfo.Address.AddressLine1+", ":""}),(0,a.jsx)("span",{children:null!==f&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.LocationInfo.Address.CityName.value?f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.LocationInfo.Address.CityName.value+", ":""}),(0,a.jsx)("span",{children:null!==f&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.LocationInfo.Address.CountryName.value?f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.LocationInfo.Address.CountryName.value+", ":""}),(0,a.jsx)("span",{children:null!==f&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.LocationInfo.Address.PostalCode?f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.LocationInfo.Address.PostalCode:""})]}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)("p",{className:"border-b"})}),(0,a.jsx)("p",{className:"text-sm lowercase",children:null!==f&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.Descriptions.Description.length>0?f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.Descriptions.Description.filter(e=>"ShortDescription"==e.Text.Type)[0].Text.value:""})]}),(0,a.jsx)("div",{id:"roomList",className:"mt-2",children:(0,a.jsx)(x,{data:D})}),(0,a.jsxs)("div",{id:"hotelAmenity",className:"mt-5 border border-luxgreen p-2",children:[(0,a.jsx)("p",{className:"text-lg text-luxgreen font-bold mb-5",children:"TW"===g?"飯店設施":"Hotel Amenities"}),f.GetHotelDetailsRS&&f.GetHotelDetailsRS.HotelDetailsInfo&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.Amenities&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo&&f.GetHotelDetailsRS.HotelDetailsInfo.HotelDescriptiveInfo.Amenities.Amenity.map((e,t)=>{var o,s;return(0,a.jsx)("span",{className:"mr-3 text-sm",children:"TW"===g?null===(o=l.propertyAmenity.filter(t=>t.code===e.Code)[0])||void 0===o?void 0:o.tw:null===(s=l.propertyAmenity.filter(t=>t.code===e.Code)[0])||void 0===s?void 0:s.en},t)})]}),(0,a.jsxs)("div",{id:"houseRules",className:"mt-5 border border-luxgreen p-2",children:[(0,a.jsx)("p",{className:"text-lg text-luxgreen font-bold mb-5",children:"TW"===g?"家庭規則":"House Rules"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-5 w-full lg:w-3/12",children:[(0,a.jsxs)("p",{className:"flex gap-2 items-center",children:[(0,a.jsx)(y.WtL,{})," ",(0,a.jsx)("span",{children:"Check-in"})]}),(0,a.jsx)("p",{className:"border"}),(0,a.jsxs)("p",{className:"flex gap-2 items-center",children:[(0,a.jsx)(y.Iw6,{})," ",(0,a.jsx)("span",{children:"Check-out"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-5 w-full lg:w-9/12",children:[(0,a.jsx)("p",{children:""!==j.checkIn?w(j.checkIn):""}),(0,a.jsx)("p",{className:"border w-full"}),(0,a.jsx)("p",{children:""!==j.checkOut?w(j.checkOut):""})]})]})]})]}),(0,a.jsx)(d.Z,{show:e})]})}},1:function(e,t,l){"use strict";var a=l(2561),o=l(4475),s=l(6493);let n=(0,a.Ue)()((0,o.tJ)(e=>({cartData:(0,s.cv)("null"),setCartData:t=>e({cartData:(0,s.cv)(t)})}),{name:"_cd"}));t.Z=n},4941:function(e,t,l){"use strict";var a=l(2561);let o=(0,a.Ue)()(e=>({checkInTime:"",checkOutTime:"",setCheckTime:(t,l)=>e({checkInTime:t,checkOutTime:l})}));t.Z=o},6008:function(e,t,l){e.exports=l(3027)},3270:function(e,t,l){"use strict";l.d(t,{w_:function(){return i}});var a=l(6006),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=a.createContext&&a.createContext(o),n=function(){return(n=Object.assign||function(e){for(var t,l=1,a=arguments.length;l<a;l++)for(var o in t=arguments[l])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=function(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(l[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)0>t.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(l[a[o]]=e[a[o]]);return l};function i(e){return function(t){return a.createElement(c,n({attr:n({},e.attr)},t),function e(t){return t&&t.map(function(t,l){return a.createElement(t.tag,n({key:l},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var l,o=e.attr,s=e.size,i=e.title,c=r(e,["attr","size","title"]),d=s||t.size||"1em";return t.className&&(l=t.className),e.className&&(l=(l?l+" ":"")+e.className),a.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,c,{className:l,style:n(n({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==s?a.createElement(s.Consumer,null,function(e){return t(e)}):t(o)}}},function(e){e.O(0,[625,166,23,846,879,253,488,744],function(){return e(e.s=229)}),_N_E=e.O()}]);