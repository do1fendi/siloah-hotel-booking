(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[281],{6317:function(e,t,a){Promise.resolve().then(a.bind(a,5534))},5534:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(9268),o=a(6006),l=a(5308),s=a(1856),r=a(4522),i=a(5670),c=a(5149),d=a(5846),g=a.n(d),m=a(8529),u=a(1741),h=a(5548);function p(e){var t,a;let{}=e,{setCloseAllShow:d}=(0,h.Z)(e=>e),{routeList:p,acceptedList:w}=(0,u.Z)(e=>e),f=(0,l.Z)(s.Z,e=>e),{setUserData:x}=(0,r.Z)(e=>e),[v,b]=(0,o.useState)({email:"",password:"",platform:"EMAIL"}),[N,j]=(0,o.useState)({email:{error:!1},password:{error:!1},dbResponse:{error:!1}}),y=e=>{b({...v,[e.name]:e.value});let t=e.name;""===e.value?j({...N,[t]:{error:!0}}):"email"===e.name&&null==e.value.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)?j({...N,[t]:{error:!0}}):"password"===e.name&&e.value.length<8?j({...N,[t]:{error:!0}}):j({...N,[t]:{error:!1}})},k=async e=>{e.preventDefault(),j({email:{error:!(""!=v.email&&v.email.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g))},password:{error:""==v.password&&!(v.password.length>=8)},dbResponse:{error:!1}}),j(e=>{let t=[];for(let a in e)t.push(e[a].error);return t.includes(!0)||(async()=>{let e={headers:{"Content-Type":"application/json","x-siloah":"siloah"},method:"POST",body:JSON.stringify(Object.fromEntries(Object.entries(v).filter(e=>"rePassword"!=e[0])))},t=await fetch("".concat("https://node.taiwanviptravel.com","/hotel/user/signin"),e),a=await t.json();"Error"===a.status?j({...N,dbResponse:{error:!0,msgCN:a.msgCN,msgEN:a.msgEN}}):(x({logged:!0,em:"".concat(a.data.email),name:"".concat(a.data.firstName," ").concat(a.data.lastName),token:a.data.token}),void 0!==p[p.length-1]&&w.some(e=>p[p.length-1].includes(e))?window.location.replace(p[p.length-1]):window.location.replace("".concat("https://do1fendi.github.io/siloah-hotel-booking"))),console.log(a)})(),e})};return(0,n.jsx)("div",{className:"flex justify-center items-center p-2 lg:p-5 lg:p-0 mt-2 lg:mt-8 text-md lg:text-lg",onClick:d,children:(0,n.jsxs)("div",{className:"shadow-xl p-5 border rounded-lg w-full lg:w-auto lg:min-w-[500px]",children:[(0,n.jsx)(m.Z,{show:N.dbResponse.error,msg:(null==f?void 0:f.lang)==="TW"?null===(t=N.dbResponse)||void 0===t?void 0:t.msgCN:null===(a=N.dbResponse)||void 0===a?void 0:a.msgEN}),(0,n.jsx)("p",{className:"text-lg font-bold hidden lg:block",children:(null==f?void 0:f.lang)==="TW"?"免費入會":"Sign Up"}),(0,n.jsxs)("form",{className:"mt-0 lg:mt-5",children:[(0,n.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,n.jsx)("label",{htmlFor:"email",className:"mb-[2px]",children:(null==f?void 0:f.lang)==="TW"?"電子信箱":"Email"}),(0,n.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===N.email.error&&"border-pink-800"),type:"email",name:"email",id:"email",onChange:e=>y(e.target)}),!0===N.email.error&&(0,n.jsx)("label",{className:"text-sm text-pink-800",children:(null==f?void 0:f.lang)==="TW"?"請輸入有效的電子信箱。":"Please enter a valid email address."})]}),(0,n.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,n.jsx)("label",{htmlFor:"password",className:"mb-[2px]",children:(null==f?void 0:f.lang)==="TW"?"密碼":"Password"}),(0,n.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===N.password.error&&"border-pink-800"),type:"password",name:"password",id:"password",onChange:e=>y(e.target)}),!0===N.password.error&&(0,n.jsx)("label",{className:"text-sm text-pink-800",children:(null==f?void 0:f.lang)==="TW"?"請輸入有效的密碼。 最少須由8個英數字組合!":"Please enter a valid password. At least 8 characters"})]}),(0,n.jsx)("button",{className:"rounded-lg bg-orange-500 hover:bg-orange-400 text-gray-100 p-2 w-full",onClick:e=>k(e),children:(null==f?void 0:f.lang)==="TW"?"送出":"Submit"})]}),(0,n.jsxs)("div",{className:"splitter flex justify-center items-center gap-2 mt-5 text-gray-500 text-sm",children:[(0,n.jsx)("p",{className:"flex-grow h-px bg-gray-400"}),(0,n.jsx)("p",{className:"",children:(null==f?void 0:f.lang)==="TW"?"或用以下帳號登入":"or continue with"}),(0,n.jsx)("p",{className:"flex-grow h-px bg-gray-400"})]}),(0,n.jsxs)("div",{className:"social-media-login flex flex-col gap-2 mt-5",children:[(0,n.jsx)(i.Z,{clientId:"267711026176-4qvtdrssib8rid36b01kp3eoduh1ie9u.apps.googleusercontent.com"}),(0,n.jsx)(c.Z,{appId:"746859163687935"})]}),(0,n.jsx)("div",{className:"splitter mt-5",children:(0,n.jsx)("p",{className:"flex-grow h-px bg-gray-400"})}),(0,n.jsx)("div",{className:"signup mt-5",children:(0,n.jsx)(g(),{href:"/signup",children:(0,n.jsx)("button",{className:"border border-orange-500 hover:bg-orange-500 hover:text-gray-100 p-2 rounded w-full",children:(null==f?void 0:f.lang)==="TW"?"我是新朋友":"Create account"})})}),(0,n.jsx)("div",{className:"term-policy text-xs text-gray-400 text-center mt-5",children:(null==f?void 0:f.lang)==="TW"?"點擊登錄即代表我同意Siloah的服務條款和隱私權政策。":"By signing in, I agree to Siloah's Terms of Use and Privacy Policy."})]})})}},8529:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var n=a(9268);function o(e){let{show:t,msg:a}=e;return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)("div",{className:"border-l-2 border-pink-800 shadow p-5 mb-5",children:(0,n.jsx)("p",{className:"text-pink-800",children:a})})})}},5149:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var n=a(9268),o=a(6341),l=a.n(o),s=a(4522),r=a(1741);function i(e){let{userData:t,setUserData:a}=(0,s.Z)(e=>e),{routeList:o,acceptedList:i}=(0,r.Z)(e=>e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{src:"https://connect.facebook.net/en_US/sdk.js",strategy:"lazyOnload",onLoad:()=>window.fbAsyncInit=function(){window.FB.init({appId:e.appId,cookie:!0,xfbml:!0,version:"v16.0"})}}),(0,n.jsx)("button",{className:"border border-orange-500 hover:bg-orange-500 hover:text-gray-100 p-2 rounded w-full",onClick:()=>void window.FB.login(function(e){"connected"===e.status&&window.FB.api("/me?fields=id,first_name,last_name,email",function(e){(async()=>{let t={headers:{"Content-Type":"application/json","x-siloah":"siloah"},method:"POST",body:JSON.stringify({firstName:e.first_name,lastName:e.last_name,email:e.email,platform:"FACEBOOK"})},n=await fetch("".concat("https://node.taiwanviptravel.com","/hotel/user/signin"),t),l=await n.json();"Error"===l.status?(a(null),window.location.replace("/")):(a({logged:!0,name:"".concat(l.data.firstName," ").concat(l.data.lastName),em:"".concat(l.data.email),token:l.data.token}),void 0!==o[o.length-1]&&i.some(e=>o[o.length-1].includes(e))&&window.location.replace(o[o.length-2]),window.location.replace("".concat("https://do1fendi.github.io/siloah-hotel-booking")))})()})},{scope:"email",return_scopes:!0}),children:"Facebook"})]})}},5670:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var n=a(9268),o=a(6341),l=a.n(o),s=a(6006),r=a(9477),i=a(6008),c=a(4522),d=a(1741);function g(e){(0,i.useRouter)();let{routeList:t,acceptedList:a}=(0,d.Z)(e=>e),{userData:o,setUserData:g}=(0,c.Z)(e=>e),[m,u]=(0,s.useState)(!1),h=e=>{let n=(0,r.Z)(e.credential);console.log((0,r.Z)(e.credential)),(async()=>{let e={headers:{"Content-Type":"application/json","x-siloah":"siloah"},method:"POST",body:JSON.stringify({firstName:n.given_name,lastName:n.family_name,email:n.email,platform:"GOOGLE"})},o=await fetch("".concat("https://node.taiwanviptravel.com","/hotel/user/signin"),e),l=await o.json();"Error"===l.status?g(null):(g({logged:!0,em:n.email.toString(),name:"".concat(l.data.firstName," ").concat(l.data.lastName),token:l.data.token}),void 0!==t[t.length-1]&&a.some(e=>t[t.length-1].includes(e))?window.location.replace(t[t.length-2]):window.location.replace("".concat("https://do1fendi.github.io/siloah-hotel-booking")))})()},p=()=>{window.googleButtonWrapper.click()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{src:"https://accounts.google.com/gsi/client",strategy:"lazyOnload",onLoad:()=>{if(window.google)try{window.google.accounts.id.initialize({client_id:e.clientId,callback:h}),window.googleButtonWrapper=(()=>{let e=document.createElement("div");e.style.display="none",document.body.appendChild(e),window.google.accounts.id.renderButton(e,{type:"standard",theme:"outline",text:"signin_with",width:"416px",shape:"square"});let t=e.querySelector("div[role=button]");return{click:()=>{t.click()}}})()}catch(e){console.log(e)}}}),(0,n.jsx)("button",{className:"border border-orange-500 hover:bg-orange-500 hover:text-gray-100 p-2 rounded w-full",onClick:()=>p(),children:"Google"})]})}},1856:function(e,t,a){"use strict";var n=a(2561),o=a(4475);let l=(0,n.Ue)()((0,o.tJ)((e,t)=>({lang:"TW",setLang:t=>e({lang:t})}),{name:"_ln"}));t.Z=l},1741:function(e,t,a){"use strict";var n=a(2561);let o=(0,n.Ue)()(e=>({routeList:[],acceptedList:["search","book","cart","package"],setRouteList:t=>{e({routeList:t})}}));t.Z=o},5548:function(e,t,a){"use strict";var n=a(2561);let o=(0,n.Ue)()(e=>({showLang:!1,showCurrency:!1,showNav:!1,showOccupation:!1,setShowLang:t=>{e({showLang:t})},setShowCurrency:t=>{e({showCurrency:t})},setShowNav:t=>{e({showNav:t})},setShowOccupation:t=>{e({showOccupation:t})},setCloseAllShow:()=>{e({showNav:!1,showCurrency:!1,showLang:!1})}}));t.Z=o},5308:function(e,t,a){"use strict";var n=a(6006);t.Z=(e,t)=>{let a=e(t),[o,l]=(0,n.useState)();return(0,n.useEffect)(()=>{l(a)},[a]),o}},4522:function(e,t,a){"use strict";var n=a(2561),o=a(6493);let l=e=>null!==window.localStorage.getItem(e)?JSON.parse((0,o.Jx)(window.localStorage.getItem(e))):null,s=(e,t)=>{window.localStorage.setItem(e,(0,o.cv)(JSON.stringify(t)))},r=(0,n.Ue)(e=>({userData:l("_ud"),setUserData:e=>{s("_ud",e)}}));t.Z=r}},function(e){e.O(0,[23,846,193,253,488,744],function(){return e(e.s=6317)}),_N_E=e.O()}]);