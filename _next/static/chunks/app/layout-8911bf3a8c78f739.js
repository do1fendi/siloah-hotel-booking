(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7771:function(e,t,r){Promise.resolve().then(r.bind(r,3205)),Promise.resolve().then(r.t.bind(r,4121,23))},3205:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var n=r(9268),l=r(1856),s=r(9944),a=r(6006),c=r(6008),o=r(5846),i=r.n(o),u=r(4522),d=r(1741),h=r(5548),f=r(8136),x=r(1),v=r(6493),g=r(5308);function m(e){let{}=e,t=(0,a.useRef)(null),r=(0,g.Z)(l.Z,e=>e.lang),o=(0,g.Z)(l.Z,e=>e),m=(0,g.Z)(s.Z,e=>e.currency),b=(0,g.Z)(s.Z,e=>e),{userData:p,setUserData:w}=(0,u.Z)(e=>e),[j,y]=(0,a.useState)(null),N=(0,c.usePathname)(),C=(0,c.useSearchParams)(),{routeList:k,setRouteList:O}=(0,d.Z)(e=>e),{cartData:S}=(0,x.Z)(),[E,L]=(0,a.useState)(0),Z=(0,a.useRef)(null),_=(0,a.useRef)(null),z=(0,a.useRef)(null),{showLang:U,setShowLang:D,showCurrency:J,setShowCurrency:W,showNav:P,setShowNav:T,showOccupation:R,setShowOccupation:I,setCloseAllShow:H}=(0,h.Z)(e=>e);return(0,a.useEffect)(()=>{var e,t,r,n,l,s;O([...k,"".concat(window.origin).concat(N,"?").concat(C)]),N.includes("/cart/")||N.includes("/package/")||N.includes("/book/")?(null===(e=_.current)||void 0===e||e.classList.add("hidden"),null===(t=Z.current)||void 0===t||t.classList.add("hidden"),null===(r=z.current)||void 0===r||r.classList.add("hidden")):(null===(n=_.current)||void 0===n||n.classList.remove("hidden"),null===(l=Z.current)||void 0===l||l.classList.remove("hidden"),null===(s=z.current)||void 0===s||s.classList.remove("hidden"))},[N,C]),(0,a.useEffect)(()=>{null!==p&&y(p.name[0].toUpperCase())},[p]),(0,a.useEffect)(()=>{function e(e){t.current&&!t.current.contains(e.target)&&H()}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t]),(0,a.useEffect)(()=>{if(null!==S&&"null"!==(0,v.Jx)(S)){let e=JSON.parse((0,v.Jx)(S)).length;L(t=>e)}},[S]),(0,n.jsxs)("div",{ref:t,className:"flex justify-between items-center p-2 lg:p-5 shadow-sm shadow-luxgreen",children:[(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-2xl text-luxgreen font-bold",children:(0,n.jsx)(i(),{href:"/",children:" SILOAH"})})}),(0,n.jsxs)("div",{className:"flex gap-2 lg:gap-5 justify-center items-center",children:[(0,n.jsxs)("div",{ref:_,className:"currency relative",children:[(0,n.jsxs)("button",{className:"font-bold",onClick:()=>{W(!0),D(!1),T(!1)},children:["$",m]}),J&&(0,n.jsx)("div",{className:"absolute -bottom-15 right-0 rounded shadow-lg z-20",children:(0,n.jsxs)("div",{className:"p-5 relative flex flex-col gap-2 bg-white",children:[(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)("button",{onClick:()=>W(!1),children:"x"})}),(0,n.jsx)("button",{className:"border border-luxgreen hover:bg-teal-600 hover:text-gray-100 p-2 w-full rounded",onClick:()=>{null==b||b.setCurrency("TWD"),W(!1)},children:"$TWD"}),(0,n.jsx)("button",{className:"border border-luxgreen hover:bg-teal-600 hover:text-gray-100 p-2 w-[150px] rounded",onClick:()=>{null==b||b.setCurrency("USD"),W(!1)},children:"$USD"})]})})]}),(0,n.jsxs)("div",{ref:Z,className:"lang relative",children:[(0,n.jsx)("button",{className:"border border-luxgreen rounded px-2 hover:bg-teal-600 hover:text-gray-100",onClick:()=>{D(!0),W(!1),T(!1)},children:r}),U&&(0,n.jsx)("div",{className:"absolute -bottom-15 right-0 rounded shadow-lg z-20",children:(0,n.jsxs)("div",{className:"p-5 relative flex flex-col gap-2 bg-white",children:[(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)("button",{onClick:()=>D(!1),children:"x"})}),(0,n.jsx)("button",{className:"border border-luxgreen hover:bg-teal-600 hover:text-gray-100 p-2 w-full rounded",onClick:()=>{null==o||o.setLang("EN"),D(!1)},children:"English"}),(0,n.jsx)("button",{className:"border border-luxgreen hover:bg-teal-600 hover:text-gray-100 p-2 w-[150px] rounded",onClick:()=>{null==o||o.setLang("TW"),D(!1)},children:"繁體中文 (台灣)"})]})})]}),null!==j&&(0,n.jsx)("div",{children:(0,n.jsx)("span",{className:"rounded-full bg-pink-600 font-bold text-gray-100 w-8 h-8 flex justify-center items-center p-2",children:j})}),(0,n.jsx)("div",{ref:z,className:"cart relative",children:(0,n.jsxs)(i(),{href:{pathname:"/cart",query:Object.fromEntries(C.entries())},children:[(0,n.jsx)(f.lcg,{size:24}),E>0&&(0,n.jsx)("span",{className:"absolute -right-3 -top-3 rounded-full w-6 h-6 bg-pink-700 text-gray-100 text-xs flex justify-center items-center",children:E})]})}),(0,n.jsxs)("div",{className:"nav relative",children:[(0,n.jsx)("button",{className:"flex justify-center items-center",onClick:()=>{T(!0),D(!1),W(!1)},children:(0,n.jsx)("svg",{className:"w-6 h-6 text-luxgreen","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),P&&(0,n.jsx)("div",{className:"absolute -bottom-15 right-0 rounded shadow-lg z-20 min-w-[200px]",children:(0,n.jsxs)("div",{className:"p-5 relative flex flex-col gap-2 bg-white",children:[(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)("button",{onClick:()=>T(!1),children:"x"})}),null===p?(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(i(),{href:{pathname:"/signup",query:Object.fromEntries(C.entries())},children:(0,n.jsx)("button",{className:"border border-luxgreen hover:bg-teal-600 hover:text-gray-100 p-2 w-full rounded",onClick:()=>T(!1),children:"TW"===r?"註冊":"Sign Up"})}),(0,n.jsx)(i(),{href:{pathname:"/signin",query:Object.fromEntries(C.entries())},children:(0,n.jsx)("button",{className:"border border-luxgreen hover:bg-teal-600 hover:text-gray-100 p-2 w-full rounded",onClick:()=>T(!1),children:"TW"===r?"登入":"Sign In"})})]}):(0,n.jsx)("button",{className:"border border-luxgreen hover:bg-teal-600 hover:text-gray-100 p-2 w-full rounded",onClick:()=>{w(null),T(!1),location.reload()},children:"TW"===r?"登出":"Sign Out"})]})})]})]})]})}},1:function(e,t,r){"use strict";var n=r(2561),l=r(4475),s=r(6493);let a=(0,n.Ue)()((0,l.tJ)(e=>({cartData:(0,s.cv)("null"),setCartData:t=>e({cartData:(0,s.cv)(t)})}),{name:"_cd"}));t.Z=a},9944:function(e,t,r){"use strict";var n=r(2561),l=r(4475);let s=(0,n.Ue)()((0,l.tJ)(e=>({currency:"TWD",setCurrency:t=>e({currency:t})}),{name:"_cr"}));t.Z=s},1856:function(e,t,r){"use strict";var n=r(2561),l=r(4475);let s=(0,n.Ue)()((0,l.tJ)((e,t)=>({lang:"TW",setLang:t=>e({lang:t})}),{name:"_ln"}));t.Z=s},1741:function(e,t,r){"use strict";var n=r(2561);let l=(0,n.Ue)()(e=>({routeList:[],acceptedList:["search","book","cart","package"],setRouteList:t=>{e({routeList:t})}}));t.Z=l},5548:function(e,t,r){"use strict";var n=r(2561);let l=(0,n.Ue)()(e=>({showLang:!1,showCurrency:!1,showNav:!1,showOccupation:!1,setShowLang:t=>{e({showLang:t})},setShowCurrency:t=>{e({showCurrency:t})},setShowNav:t=>{e({showNav:t})},setShowOccupation:t=>{e({showOccupation:t})},setCloseAllShow:()=>{e({showNav:!1,showCurrency:!1,showLang:!1})}}));t.Z=l},5308:function(e,t,r){"use strict";var n=r(6006);t.Z=(e,t)=>{let r=e(t),[l,s]=(0,n.useState)();return(0,n.useEffect)(()=>{s(r)},[r]),l}},4522:function(e,t,r){"use strict";var n=r(2561),l=r(6493);let s=e=>null!==window.localStorage.getItem(e)?JSON.parse((0,l.Jx)(window.localStorage.getItem(e))):null,a=(e,t)=>{window.localStorage.setItem(e,(0,l.cv)(JSON.stringify(t)))},c=(0,n.Ue)(e=>({userData:s("_ud"),setUserData:e=>{a("_ud",e)}}));t.Z=c},4121:function(){},6008:function(e,t,r){e.exports=r(3027)},3270:function(e,t,r){"use strict";r.d(t,{w_:function(){return o}});var n=r(6006),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=n.createContext&&n.createContext(l),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]]);return r};function o(e){return function(t){return n.createElement(i,a({attr:a({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return n.createElement(t.tag,a({key:r},t.attr),e(t.child))})}(e.child))}}function i(e){var t=function(t){var r,l=e.attr,s=e.size,o=e.title,i=c(e,["attr","size","title"]),u=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,i,{className:r,style:a(a({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&n.createElement("title",null,o),e.children)};return void 0!==s?n.createElement(s.Consumer,null,function(e){return t(e)}):t(l)}}},function(e){e.O(0,[680,23,846,253,488,744],function(){return e(e.s=7771)}),_N_E=e.O()}]);