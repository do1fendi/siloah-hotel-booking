(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{3278:function(e,t,r){Promise.resolve().then(r.bind(r,5486))},5486:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(9268),a=r(6006),s=r(1856),l=r(4522),o=r(6341),i=r.n(o);function c(e){this.message=e}c.prototype=Error(),c.prototype.name="InvalidCharacterError";var d="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new c("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,a=0,s=0,l="";n=t.charAt(s++);~n&&(r=a%4?64*r+n:n,a++%4)&&(l+=String.fromCharCode(255&r>>(-2*a&6))))n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return l};function u(e){this.message=e}u.prototype=Error(),u.prototype.name="InvalidTokenError";var m=function(e,t){if("string"!=typeof e)throw new u("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t,r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return t=r,decodeURIComponent(d(t).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return d(r)}}(e.split(".")[r]))}catch(e){throw new u("Invalid token specified: "+e.message)}},f=r(6008);function p(e){let t=(0,f.useRouter)(),[r,s]=(0,a.useState)(!1),l=e=>{console.log(e),console.log(m(e.credential))};return(0,a.useEffect)(()=>{window.google.accounts.id.initialize({client_id:e.clientId,callback:l});let t=(()=>{let e=document.createElement("div");e.style.display="none",e.classList.add("custom-google-button"),document.body.appendChild(e),window.google.accounts.id.renderButton(e,{type:"icon",width:"200"});let t=e.querySelector("div[role=button]");return{click:()=>{t.click()}}})();s(e=>(!0===e&&(console.log("pressed"),t.click()),s(!1),e))},[t,r]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{src:"https://accounts.google.com/gsi/client",async:!0,defer:!0,strategy:"beforeInteractive"}),(0,n.jsx)("button",{className:"border border-orange-500 hover:bg-orange-500 hover:text-gray-100 p-2 rounded w-full",onClick:()=>s(!0),children:"Google"})]})}var g=r(5846),h=r.n(g);function b(e){let{show:t,msg:r}=e;return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)("div",{className:"border-l-2 border-pink-800 shadow p-5 mb-5",children:(0,n.jsx)("p",{className:"text-pink-800",children:r})})})}function x(e){var t,r;let{}=e,{lang:o}=(0,s.Z)(e=>e),{setUserData:i,refresh:c,setRefresh:d}=(0,l.Z)(e=>e),[u,m]=(0,a.useState)({firstName:"",lastName:"",email:"",password:"",rePassword:"",platform:"EMAIL"}),[f,g]=(0,a.useState)({firstName:{error:!1},lastName:{error:!1},email:{error:!1},password:{error:!1},rePassword:{error:!1},dbResponse:{error:!1}}),x=e=>{m({...u,[e.name]:e.value});let t=e.name;""===e.value?g({...f,[t]:{error:!0}}):"email"===e.name&&null==e.value.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)?g({...f,[t]:{error:!0}}):"password"===e.name&&e.value.length<8||"rePassword"===e.name&&e.value.length<8||"rePassword"===e.name&&e.value!==u.password?g({...f,[t]:{error:!0}}):g({...f,[t]:{error:!1}})},y=async e=>{e.preventDefault(),g({firstName:{error:""==u.firstName},lastName:{error:""==u.lastName},email:{error:!(""!=u.email&&u.email.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g))},password:{error:""==u.password&&!(u.password.length>=8)},rePassword:{error:""==u.rePassword&&!(u.password.length>=8)},dbResponse:{error:!1}}),g(e=>{let t=[];for(let r in e)t.push(e[r].error);return t.includes(!0)||(async()=>{let e={headers:{"Content-Type":"application/json","x-siloah":"siloah"},method:"POST",body:JSON.stringify(u)},t=await fetch("".concat("http://localhost:5000","/hotel/customer/signup"),e),r=await t.json();"Error"===r.status?g({...f,dbResponse:{error:!0,msgCN:r.msgCN,msgEN:r.msgEN}}):(i({logged:!0,name:"".concat(r.msg.firstName," ").concat(r.msg.lastName),token:r.msg.token}),location.reload()),console.log(r)})(),e})};return(0,n.jsx)("div",{className:"flex justify-center items-center p-2 lg:p-5 lg:p-0 mt-2 lg:mt-8 text-md lg:text-lg",children:(0,n.jsxs)("div",{className:"shadow-xl p-5 border rounded-lg w-full lg:w-auto lg:min-w-[500px]",children:[(0,n.jsx)(b,{show:f.dbResponse.error,msg:"TW"===o?null===(t=f.dbResponse)||void 0===t?void 0:t.msgCN:null===(r=f.dbResponse)||void 0===r?void 0:r.msgEN}),(0,n.jsx)("p",{className:"text-lg font-bold hidden lg:block",children:"TW"===o?"免費入會":"Sign Up"}),(0,n.jsxs)("form",{className:"mt-0 lg:mt-5",children:[(0,n.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,n.jsx)("label",{htmlFor:"firstName",className:"mb-[2px]",children:"TW"===o?"護照英文名":"First Name"}),(0,n.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===f.firstName.error&&"border-pink-800"),type:"text",name:"firstName",id:"firstName",onChange:e=>x(e.target)}),!0===f.firstName.error&&(0,n.jsx)("label",{className:"text-sm text-pink-800",children:"TW"===o?"請輸入有效的名字(限英文)。":"Please enter a valid first name (English only)."})]}),(0,n.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,n.jsx)("label",{htmlFor:"lastName",className:"mb-[2px]",children:"TW"===o?"護照英文姓":"Last Name"}),(0,n.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===f.lastName.error&&"border-pink-800"),type:"text",name:"lastName",id:"lastName",onChange:e=>x(e.target)}),!0===f.lastName.error&&(0,n.jsx)("label",{className:"text-sm text-pink-800",children:"TW"===o?"請輸入有效的姓氏(限英文)。。":"Please enter a valid last name (English only)."})]}),(0,n.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,n.jsx)("label",{htmlFor:"email",className:"mb-[2px]",children:"TW"===o?"電子信箱":"Email"}),(0,n.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===f.email.error&&"border-pink-800"),type:"email",name:"email",id:"email",onChange:e=>x(e.target)}),!0===f.email.error&&(0,n.jsx)("label",{className:"text-sm text-pink-800",children:"TW"===o?"請輸入有效的電子信箱。":"Please enter a valid email address."})]}),(0,n.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,n.jsx)("label",{htmlFor:"password",className:"mb-[2px]",children:"TW"===o?"密碼":"Password"}),(0,n.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===f.password.error&&"border-pink-800"),type:"password",name:"password",id:"password",onChange:e=>x(e.target)}),!0===f.password.error&&(0,n.jsx)("label",{className:"text-sm text-pink-800",children:"TW"===o?"請輸入有效的密碼。 最少須由8個英數字組合!":"Please enter a valid password. At least 8 characters"})]}),(0,n.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,n.jsx)("label",{htmlFor:"rePassword",className:"mb-[2px]",children:"TW"===o?"確認密碼":"Confirm Password"}),(0,n.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===f.rePassword.error&&"border-pink-800"),type:"password",name:"rePassword",id:"rePassword",onChange:e=>x(e.target)}),!0===f.rePassword.error&&(0,n.jsx)("label",{className:"text-sm text-pink-800",children:"TW"===o?"請輸入有效的密碼。 最少須由8個英數字組合!":"Please enter a valid password. At least 8 characters"})]}),(0,n.jsx)("button",{className:"rounded-lg bg-orange-500 hover:bg-orange-400 text-gray-100 p-2 w-full",onClick:e=>y(e),children:"TW"===o?"送出":"Submit"})]}),(0,n.jsxs)("div",{className:"splitter flex justify-center items-center gap-2 mt-5 text-gray-500 text-sm",children:[(0,n.jsx)("p",{className:"flex-grow h-px bg-gray-400"}),(0,n.jsx)("p",{className:"",children:"TW"===o?"或用以下帳號登入":"or continue with"}),(0,n.jsx)("p",{className:"flex-grow h-px bg-gray-400"})]}),(0,n.jsx)("div",{className:"social-media-login flex flex-col gap-2 mt-5",children:(0,n.jsx)(p,{clientId:"267711026176-4qvtdrssib8rid36b01kp3eoduh1ie9u.apps.googleusercontent.com"})}),(0,n.jsx)("div",{className:"splitter mt-5",children:(0,n.jsx)("p",{className:"flex-grow h-px bg-gray-400"})}),(0,n.jsx)("div",{className:"signin mt-5",children:(0,n.jsx)(h(),{href:"/signin",children:(0,n.jsx)("button",{className:"border border-orange-500 hover:bg-orange-500 hover:text-gray-100 p-2 rounded w-full",children:"TW"===o?"已經是會員？登入":"Already have an account? Sign in"})})}),(0,n.jsx)("div",{className:"term-policy text-xs text-gray-400 text-center mt-5",children:"TW"===o?"點擊登錄即代表我同意Siloah的服務條款和隱私權政策。":"By signing in, I agree to Siloah's Terms of Use and Privacy Policy."})]})})}},6167:function(e,t){"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DOMAttributeNames:function(){return n},isEqualNode:function(){return s},default:function(){return l}});let n={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",noModule:"noModule"};function a(e){let{type:t,props:r}=e,a=document.createElement(t);for(let e in r){if(!r.hasOwnProperty(e)||"children"===e||"dangerouslySetInnerHTML"===e||void 0===r[e])continue;let s=n[e]||e.toLowerCase();"script"===t&&("async"===s||"defer"===s||"noModule"===s)?a[s]=!!r[e]:a.setAttribute(s,r[e])}let{children:s,dangerouslySetInnerHTML:l}=r;return l?a.innerHTML=l.__html||"":s&&(a.textContent="string"==typeof s?s:Array.isArray(s)?s.join(""):""),a}function s(e,t){if(e instanceof HTMLElement&&t instanceof HTMLElement){let r=t.getAttribute("nonce");if(r&&!e.getAttribute("nonce")){let n=t.cloneNode(!0);return n.setAttribute("nonce",""),n.nonce=r,r===e.nonce&&e.isEqualNode(n)}}return e.isEqualNode(t)}function l(){return{mountedInstances:new Set,updateHead:e=>{let t={};e.forEach(e=>{if("link"===e.type&&e.props["data-optimized-fonts"]){if(document.querySelector('style[data-href="'+e.props["data-href"]+'"]'))return;e.props.href=e.props["data-href"],e.props["data-href"]=void 0}let r=t[e.type]||[];r.push(e),t[e.type]=r});let n=t.title?t.title[0]:null,a="";if(n){let{children:e}=n.props;a="string"==typeof e?e:Array.isArray(e)?e.join(""):""}a!==document.title&&(document.title=a),["meta","base","link","style","script"].forEach(e=>{r(e,t[e]||[])})}}}r=(e,t)=>{let r=document.getElementsByTagName("head")[0],n=r.querySelector("meta[name=next-head-count]"),l=Number(n.content),o=[];for(let t=0,r=n.previousElementSibling;t<l;t++,r=(null==r?void 0:r.previousElementSibling)||null){var i;(null==r?void 0:null==(i=r.tagName)?void 0:i.toLowerCase())===e&&o.push(r)}let c=t.map(a).filter(e=>{for(let t=0,r=o.length;t<r;t++){let r=o[t];if(s(r,e))return o.splice(t,1),!1}return!0});o.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),c.forEach(e=>r.insertBefore(e,n)),n.content=(l-o.length+c.length).toString()},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1273:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{handleClientScriptLoad:function(){return p},initScriptLoader:function(){return g},default:function(){return b}});let n=r(6927),a=r(5909),s=n._(r(8431)),l=a._(r(6006)),o=r(5415),i=r(6167),c=r(1722),d=new Map,u=new Set,m=["onLoad","onReady","dangerouslySetInnerHTML","children","onError","strategy"],f=e=>{let{src:t,id:r,onLoad:n=()=>{},onReady:a=null,dangerouslySetInnerHTML:s,children:l="",strategy:o="afterInteractive",onError:c}=e,f=r||t;if(f&&u.has(f))return;if(d.has(t)){u.add(f),d.get(t).then(n,c);return}let p=()=>{a&&a(),u.add(f)},g=document.createElement("script"),h=new Promise((e,t)=>{g.addEventListener("load",function(t){e(),n&&n.call(this,t),p()}),g.addEventListener("error",function(e){t(e)})}).catch(function(e){c&&c(e)});for(let[r,n]of(s?(g.innerHTML=s.__html||"",p()):l?(g.textContent="string"==typeof l?l:Array.isArray(l)?l.join(""):"",p()):t&&(g.src=t,d.set(t,h)),Object.entries(e))){if(void 0===n||m.includes(r))continue;let e=i.DOMAttributeNames[r]||r.toLowerCase();g.setAttribute(e,n)}"worker"===o&&g.setAttribute("type","text/partytown"),g.setAttribute("data-nscript",o),document.body.appendChild(g)};function p(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,c.requestIdleCallback)(()=>f(e))}):f(e)}function g(e){e.forEach(p),function(){let e=[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')];e.forEach(e=>{let t=e.id||e.getAttribute("src");u.add(t)})}()}function h(e){let{id:t,src:r="",onLoad:n=()=>{},onReady:a=null,strategy:i="afterInteractive",onError:d,...m}=e,{updateScripts:p,scripts:g,getIsSsr:h,appDir:b,nonce:x}=(0,l.useContext)(o.HeadManagerContext),y=(0,l.useRef)(!1);(0,l.useEffect)(()=>{let e=t||r;y.current||(a&&e&&u.has(e)&&a(),y.current=!0)},[a,t,r]);let w=(0,l.useRef)(!1);if((0,l.useEffect)(()=>{!w.current&&("afterInteractive"===i?f(e):"lazyOnload"===i&&("complete"===document.readyState?(0,c.requestIdleCallback)(()=>f(e)):window.addEventListener("load",()=>{(0,c.requestIdleCallback)(()=>f(e))})),w.current=!0)},[e,i]),("beforeInteractive"===i||"worker"===i)&&(p?(g[i]=(g[i]||[]).concat([{id:t,src:r,onLoad:n,onReady:a,onError:d,...m}]),p(g)):h&&h()?u.add(t||r):h&&!h()&&f(e)),b){if("beforeInteractive"===i)return r?(s.default.preload(r,m.integrity?{as:"script",integrity:m.integrity}:{as:"script"}),l.default.createElement("script",{nonce:x,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([r])+")"}})):(m.dangerouslySetInnerHTML&&(m.children=m.dangerouslySetInnerHTML.__html,delete m.dangerouslySetInnerHTML),l.default.createElement("script",{nonce:x,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([0,{...m}])+")"}}));"afterInteractive"===i&&r&&s.default.preload(r,m.integrity?{as:"script",integrity:m.integrity}:{as:"script"})}return null}Object.defineProperty(h,"__nextScript",{value:!0});let b=h;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1856:function(e,t,r){"use strict";var n=r(2561);let a=(0,n.Ue)()(e=>({lang:"TW",setLang:t=>e({lang:t})}));t.Z=a},4522:function(e,t,r){"use strict";var n=r(2561);let a=e=>JSON.parse(window.localStorage.getItem(e)),s=(e,t)=>{window.localStorage.setItem(e,JSON.stringify(t))},l=(0,n.Ue)(e=>({userData:a("userData"),refresh:!1,setUserData:e=>s("userData",e),setRefresh:t=>e({refresh:t})}));t.Z=l},6341:function(e,t,r){e.exports=r(1273)}},function(e){e.O(0,[789,253,488,744],function(){return e(e.s=3278)}),_N_E=e.O()}]);