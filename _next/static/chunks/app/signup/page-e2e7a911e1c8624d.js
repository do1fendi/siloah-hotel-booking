(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{3278:function(e,a,t){Promise.resolve().then(t.bind(t,5625))},5625:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var s=t(9268),n=t(6006),l=t(5308),r=t(1856),o=t(4522),i=t(5670),c=t(5149),d=t(5846),m=t.n(d),g=t(8529),u=t(1741),h=t(5548);function p(e){var a,t;let{}=e,{setCloseAllShow:d}=(0,h.Z)(e=>e),p=(0,l.Z)(r.Z,e=>e),{setUserData:w}=(0,o.Z)(e=>e),[x,f]=(0,n.useState)({firstName:"",lastName:"",email:"",password:"",rePassword:"",platform:"EMAIL"}),[b,N]=(0,n.useState)({firstName:{error:!1},lastName:{error:!1},email:{error:!1},password:{error:!1},rePassword:{error:!1},dbResponse:{error:!1}}),{routeList:v,acceptedList:j}=(0,u.Z)(e=>e),y=e=>{f({...x,[e.name]:e.value});let a=e.name;""===e.value?N({...b,[a]:{error:!0}}):"email"===e.name&&null==e.value.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)?N({...b,[a]:{error:!0}}):"password"===e.name&&e.value.length<8||"rePassword"===e.name&&e.value.length<8||"rePassword"===e.name&&e.value!==x.password?N({...b,[a]:{error:!0}}):N({...b,[a]:{error:!1}})},k=async e=>{e.preventDefault(),N({firstName:{error:""==x.firstName},lastName:{error:""==x.lastName},email:{error:!(""!=x.email&&x.email.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g))},password:{error:""==x.password&&!(x.password.length>=8)},rePassword:{error:""==x.rePassword&&!(x.password.length>=8)},dbResponse:{error:!1}}),N(e=>{let a=[];for(let t in e)a.push(e[t].error);return a.includes(!0)||(async()=>{let e={headers:{"Content-Type":"application/json","x-siloah":"siloah"},method:"POST",body:JSON.stringify(Object.fromEntries(Object.entries(x).filter(e=>"rePassword"!=e[0])))},a=await fetch("".concat("https://node.taiwanviptravel.com","/hotel/user/signup"),e),t=await a.json();"Error"===t.status?N({...b,dbResponse:{error:!0,msgCN:t.msgCN,msgEN:t.msgEN}}):(w({logged:!0,em:"".concat(t.data.email),name:"".concat(t.data.firstName," ").concat(t.data.lastName),token:t.data.token}),void 0!==v[v.length-1]&&j.some(e=>v[v.length-1].includes(e))?window.location.replace(v[v.length-1]):window.location.replace("".concat("https://do1fendi.github.io/siloah-hotel-booking"))),console.log(t)})(),e})};return(0,s.jsx)("div",{className:"flex justify-center items-center p-2 lg:p-5 lg:p-0 mt-2 lg:mt-8 text-md lg:text-lg",onClick:d,children:(0,s.jsxs)("div",{className:"shadow-xl p-5 border rounded-lg w-full lg:w-auto lg:min-w-[500px]",children:[(0,s.jsx)(g.Z,{show:b.dbResponse.error,msg:(null==p?void 0:p.lang)==="TW"?null===(a=b.dbResponse)||void 0===a?void 0:a.msgCN:null===(t=b.dbResponse)||void 0===t?void 0:t.msgEN}),(0,s.jsx)("p",{className:"text-lg font-bold hidden lg:block",children:(null==p?void 0:p.lang)==="TW"?"免費入會":"Sign Up"}),(0,s.jsxs)("form",{className:"mt-0 lg:mt-5",children:[(0,s.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,s.jsx)("label",{htmlFor:"firstName",className:"mb-[2px]",children:(null==p?void 0:p.lang)==="TW"?"護照英文名":"First Name"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===b.firstName.error&&"border-pink-800"),type:"text",name:"firstName",id:"firstName",onChange:e=>y(e.target)}),!0===b.firstName.error&&(0,s.jsx)("label",{className:"text-sm text-pink-800",children:(null==p?void 0:p.lang)==="TW"?"請輸入有效的名字(限英文)。":"Please enter a valid first name (English only)."})]}),(0,s.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,s.jsx)("label",{htmlFor:"lastName",className:"mb-[2px]",children:(null==p?void 0:p.lang)==="TW"?"護照英文姓":"Last Name"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===b.lastName.error&&"border-pink-800"),type:"text",name:"lastName",id:"lastName",onChange:e=>y(e.target)}),!0===b.lastName.error&&(0,s.jsx)("label",{className:"text-sm text-pink-800",children:(null==p?void 0:p.lang)==="TW"?"請輸入有效的姓氏(限英文)。。":"Please enter a valid last name (English only)."})]}),(0,s.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,s.jsx)("label",{htmlFor:"email",className:"mb-[2px]",children:(null==p?void 0:p.lang)==="TW"?"電子信箱":"Email"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===b.email.error&&"border-pink-800"),type:"email",name:"email",id:"email",onChange:e=>y(e.target)}),!0===b.email.error&&(0,s.jsx)("label",{className:"text-sm text-pink-800",children:(null==p?void 0:p.lang)==="TW"?"請輸入有效的電子信箱。":"Please enter a valid email address."})]}),(0,s.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,s.jsx)("label",{htmlFor:"password",className:"mb-[2px]",children:(null==p?void 0:p.lang)==="TW"?"密碼":"Password"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===b.password.error&&"border-pink-800"),type:"password",name:"password",id:"password",onChange:e=>y(e.target)}),!0===b.password.error&&(0,s.jsx)("label",{className:"text-sm text-pink-800",children:(null==p?void 0:p.lang)==="TW"?"請輸入有效的密碼。 最少須由8個英數字組合!":"Please enter a valid password. At least 8 characters"})]}),(0,s.jsxs)("div",{className:"flex flex-col mb-2 lg:mb-5",children:[(0,s.jsx)("label",{htmlFor:"rePassword",className:"mb-[2px]",children:(null==p?void 0:p.lang)==="TW"?"確認密碼":"Confirm Password"}),(0,s.jsx)("input",{className:"border rounded-lg p-2 ".concat(!0===b.rePassword.error&&"border-pink-800"),type:"password",name:"rePassword",id:"rePassword",onChange:e=>y(e.target)}),!0===b.rePassword.error&&(0,s.jsx)("label",{className:"text-sm text-pink-800",children:(null==p?void 0:p.lang)==="TW"?"請輸入有效的密碼。 最少須由8個英數字組合!":"Please enter a valid password. At least 8 characters"})]}),(0,s.jsx)("button",{className:"rounded-lg bg-orange-500 hover:bg-orange-400 text-gray-100 p-2 w-full",onClick:e=>k(e),children:(null==p?void 0:p.lang)==="TW"?"送出":"Submit"})]}),(0,s.jsxs)("div",{className:"splitter flex justify-center items-center gap-2 mt-5 text-gray-500 text-sm",children:[(0,s.jsx)("p",{className:"flex-grow h-px bg-gray-400"}),(0,s.jsx)("p",{className:"",children:(null==p?void 0:p.lang)==="TW"?"或用以下帳號登入":"or continue with"}),(0,s.jsx)("p",{className:"flex-grow h-px bg-gray-400"})]}),(0,s.jsxs)("div",{className:"social-media-login flex flex-col gap-2 mt-5",children:[(0,s.jsx)(i.Z,{clientId:"267711026176-4qvtdrssib8rid36b01kp3eoduh1ie9u.apps.googleusercontent.com"}),(0,s.jsx)(c.Z,{appId:"746859163687935"})]}),(0,s.jsx)("div",{className:"splitter mt-5",children:(0,s.jsx)("p",{className:"flex-grow h-px bg-gray-400"})}),(0,s.jsx)("div",{className:"signin mt-5",children:(0,s.jsx)(m(),{href:"/signin",children:(0,s.jsx)("button",{className:"border border-orange-500 hover:bg-orange-500 hover:text-gray-100 p-2 rounded w-full",children:(null==p?void 0:p.lang)==="TW"?"已經是會員？登入":"Already have an account? Sign in"})})}),(0,s.jsx)("div",{className:"term-policy text-xs text-gray-400 text-center mt-5",children:(null==p?void 0:p.lang)==="TW"?"點擊登錄即代表我同意Siloah的服務條款和隱私權政策。":"By signing in, I agree to Siloah's Terms of Use and Privacy Policy."})]})})}},8529:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var s=t(9268);function n(e){let{show:a,msg:t}=e;return(0,s.jsx)(s.Fragment,{children:a&&(0,s.jsx)("div",{className:"border-l-2 border-pink-800 shadow p-5 mb-5",children:(0,s.jsx)("p",{className:"text-pink-800",children:t})})})}},5149:function(e,a,t){"use strict";t.d(a,{Z:function(){return i}});var s=t(9268),n=t(6341),l=t.n(n),r=t(4522),o=t(1741);function i(e){let{userData:a,setUserData:t}=(0,r.Z)(e=>e),{routeList:n,acceptedList:i}=(0,o.Z)(e=>e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{src:"https://connect.facebook.net/en_US/sdk.js",strategy:"lazyOnload",onLoad:()=>window.fbAsyncInit=function(){window.FB.init({appId:e.appId,cookie:!0,xfbml:!0,version:"v16.0"})}}),(0,s.jsx)("button",{className:"border border-orange-500 hover:bg-orange-500 hover:text-gray-100 p-2 rounded w-full",onClick:()=>void window.FB.login(function(e){"connected"===e.status&&window.FB.api("/me?fields=id,first_name,last_name,email",function(e){(async()=>{let a={headers:{"Content-Type":"application/json","x-siloah":"siloah"},method:"POST",body:JSON.stringify({firstName:e.first_name,lastName:e.last_name,email:e.email,platform:"FACEBOOK"})},s=await fetch("".concat("https://node.taiwanviptravel.com","/hotel/user/signin"),a),l=await s.json();"Error"===l.status?(t(null),window.location.replace("/")):(t({logged:!0,name:"".concat(l.data.firstName," ").concat(l.data.lastName),em:"".concat(l.data.email),token:l.data.token}),void 0!==n[n.length-1]&&i.some(e=>n[n.length-1].includes(e))&&window.location.replace(n[n.length-2]),window.location.replace("".concat("https://do1fendi.github.io/siloah-hotel-booking")))})()})},{scope:"email",return_scopes:!0}),children:"Facebook"})]})}},5670:function(e,a,t){"use strict";t.d(a,{Z:function(){return m}});var s=t(9268),n=t(6341),l=t.n(n),r=t(6006),o=t(9477),i=t(6008),c=t(4522),d=t(1741);function m(e){(0,i.useRouter)();let{routeList:a,acceptedList:t}=(0,d.Z)(e=>e),{userData:n,setUserData:m}=(0,c.Z)(e=>e),[g,u]=(0,r.useState)(!1),h=e=>{let s=(0,o.Z)(e.credential);console.log((0,o.Z)(e.credential)),(async()=>{let e={headers:{"Content-Type":"application/json","x-siloah":"siloah"},method:"POST",body:JSON.stringify({firstName:s.given_name,lastName:s.family_name,email:s.email,platform:"GOOGLE"})},n=await fetch("".concat("https://node.taiwanviptravel.com","/hotel/user/signin"),e),l=await n.json();"Error"===l.status?m(null):(m({logged:!0,em:s.email.toString(),name:"".concat(l.data.firstName," ").concat(l.data.lastName),token:l.data.token}),void 0!==a[a.length-1]&&t.some(e=>a[a.length-1].includes(e))?window.location.replace(a[a.length-2]):window.location.replace("".concat("https://do1fendi.github.io/siloah-hotel-booking")))})()},p=()=>{window.googleButtonWrapper.click()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{src:"https://accounts.google.com/gsi/client",strategy:"lazyOnload",onLoad:()=>{if(window.google)try{window.google.accounts.id.initialize({client_id:e.clientId,callback:h}),window.googleButtonWrapper=(()=>{let e=document.createElement("div");e.style.display="none",document.body.appendChild(e),window.google.accounts.id.renderButton(e,{type:"standard",theme:"outline",text:"signin_with",width:"416px",shape:"square"});let a=e.querySelector("div[role=button]");return{click:()=>{a.click()}}})()}catch(e){console.log(e)}}}),(0,s.jsx)("button",{className:"border border-orange-500 hover:bg-orange-500 hover:text-gray-100 p-2 rounded w-full",onClick:()=>p(),children:"Google"})]})}},1856:function(e,a,t){"use strict";var s=t(2561),n=t(4475);let l=(0,s.Ue)()((0,n.tJ)((e,a)=>({lang:"TW",setLang:a=>e({lang:a})}),{name:"_ln"}));a.Z=l},1741:function(e,a,t){"use strict";var s=t(2561);let n=(0,s.Ue)()(e=>({routeList:[],acceptedList:["search","book","cart","package"],setRouteList:a=>{e({routeList:a})}}));a.Z=n},5548:function(e,a,t){"use strict";var s=t(2561);let n=(0,s.Ue)()(e=>({showLang:!1,showCurrency:!1,showNav:!1,showOccupation:!1,setShowLang:a=>{e({showLang:a})},setShowCurrency:a=>{e({showCurrency:a})},setShowNav:a=>{e({showNav:a})},setShowOccupation:a=>{e({showOccupation:a})},setCloseAllShow:()=>{e({showNav:!1,showCurrency:!1,showLang:!1})}}));a.Z=n},5308:function(e,a,t){"use strict";var s=t(6006);a.Z=(e,a)=>{let t=e(a),[n,l]=(0,s.useState)();return(0,s.useEffect)(()=>{l(t)},[t]),n}},4522:function(e,a,t){"use strict";var s=t(2561),n=t(6493);let l=e=>null!==window.localStorage.getItem(e)?JSON.parse((0,n.Jx)(window.localStorage.getItem(e))):null,r=(e,a)=>{window.localStorage.setItem(e,(0,n.cv)(JSON.stringify(a)))},o=(0,s.Ue)(e=>({userData:l("_ud"),setUserData:e=>{r("_ud",e)}}));a.Z=o}},function(e){e.O(0,[23,846,193,253,488,744],function(){return e(e.s=3278)}),_N_E=e.O()}]);